
#########################################################
## Developed by Little Room, patreon.com/littleroomdev ##
#########################################################

gokartPEDESTRIANS:
  Conditions:
  - ismoving true
  Skills:
  - throw{velocity=15;velocityY=5} @EIR{r=2;ignore=samefaction}

gokartBOOST:
  Conditions:
  - mobsInRadius{types=gokart_red,gokart_yellow,gokart_green,gokart_blue,gokart_pink,gokart_purple;amount=1;radius=2}
  Skills:
  - sound{s=minecraft:entity.evoker.cast_spell} @self
  - potion{type=SPEED;duration=80;level=3} @MIR{r=2;types=gokart_red,gokart_yellow,gokart_green,gokart_blue,gokart_pink,gokart_purple}
  - delay 2
  - remove @self

gokartREPAIR:
  Conditions:
  - mobsInRadius{types=gokart_red,gokart_yellow,gokart_green,gokart_blue,gokart_pink,gokart_purple;amount=1;radius=2}
  Skills:
  - sound{s=minecraft:block.anvil.use} @self
  - heal{amount=10} @MIR{r=2;types=gokart_red,gokart_yellow,gokart_green,gokart_blue,gokart_pink,gokart_purple}
  - delay 2
  - remove @self

gokartFX:
  Skills:
  - effect:particles{particle=large_smoke;amount=10;speed=0} @ModelPart{m=gokartred;p=gokart;offset=LOCAL;y=.25;z=-3.25}
  - effect:particles{particle=large_smoke;amount=10;speed=0} @ModelPart{m=gokartyellow;p=gokart;offset=LOCAL;y=.25;z=-3.25}
  - effect:particles{particle=large_smoke;amount=10;speed=0} @ModelPart{m=gokartpink;p=gokart;offset=LOCAL;y=.25;z=-3.25}
  - effect:particles{particle=large_smoke;amount=10;speed=0} @ModelPart{m=gokartpurple;p=gokart;offset=LOCAL;y=.25;z=-3.25}
  - effect:particles{particle=large_smoke;amount=10;speed=0} @ModelPart{m=gokartblue;p=gokart;offset=LOCAL;y=.25;z=-3.25}
  - effect:particles{particle=large_smoke;amount=10;speed=0} @ModelPart{m=gokartgreen;p=gokart;offset=LOCAL;y=.25;z=-3.25}
  - potion{type=SLOW;duration=10;level=2} @self
  
gokartCRITICALFX:
  Skills:
  - effect:particles{particle=large_smoke;amount=50;speed=0;hs=.25;vs=.25} @ModelPart{m=gokartred;p=gokart;offset=LOCAL;y=.25;z=-3.25}
  - effect:particles{particle=large_smoke;amount=50;speed=0;hs=.25;vs=.25} @ModelPart{m=gokartyellow;p=gokart;offset=LOCAL;y=.25;z=-3.25}
  - effect:particles{particle=large_smoke;amount=50;speed=0;hs=.25;vs=.25} @ModelPart{m=gokartpink;p=gokart;offset=LOCAL;y=.25;z=-3.25}
  - effect:particles{particle=large_smoke;amount=50;speed=0;hs=.25;vs=.25} @ModelPart{m=gokartpurple;p=gokart;offset=LOCAL;y=.25;z=-3.25}
  - effect:particles{particle=large_smoke;amount=50;speed=0;hs=.25;vs=.25} @ModelPart{m=gokartblue;p=gokart;offset=LOCAL;y=.25;z=-3.25}
  - effect:particles{particle=large_smoke;amount=50;speed=0;hs=.25;vs=.25} @ModelPart{m=gokartgreen;p=gokart;offset=LOCAL;y=.25;z=-3.25}
  - potion{type=SLOW;duration=10;level=3} @self


gokartIGNITION:
  Conditions:
  - hasPassenger{} false
  - mounted{} false
  Cooldown: 5
  Skills:
  - ejectpassenger
  - mountmodel @trigger ~onInteract
  - sound{s=littleroom_gokarts:littleroom.gokarts.ignition;sc=HOSTILE} @self
  
  
gokartSCAN:
  Conditions:
  - ismoving true
  TargetConditions:
  - blocktype AIR false
  Skills:
  - effect:particles{particle=flame;amount=20speed=0} @Forward{f=3;y=0.0}
  - skill{s=gokartDAMAGE} @self
  
gokartDAMAGE:
  Conditions:
  - ismoving true
  Cooldown: 1
  Skills:
  - ejectpassenger
  - throw{velocity=15;velocityY=5} @self
  #- state{s=walk;r=true} @self
  - state{s=impact} @self
  - damage{a=5} @self
  - velocity{m=set;x=0;y=0;z=0} @self
  - sound{s=littleroom_gokarts:littleroom.gokarts.impact;sc=HOSTILE} @self
  
gokartSLOW_FX:
  Conditions:
  - onblock{b=DIRT,GRASS_BLOCK} true
  - ismoving true
  Skills:
  - effect:particles{particle=block_crack;m=grass;amount=50;hS=1;vS=.25} @self

  
  
gokartSLOW_GRASS:
  Conditions:
  - onblock{b=GRASS_BLOCK} true
  - ismoving true
  Skills:
  - effect:blockmask{m=GRASS_PATH;r=2;d=60} @self
  - sound{s=minecraft:block.grass.break;v=0.5} @self
  - potion{type=SLOW;duration=10;level=4} @self
