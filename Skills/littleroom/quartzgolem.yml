
#########################################################
## Developed by Little Room, patreon.com/littleroomdev ##
#########################################################

### GOLEM ###

quartzgolemSPAWN:
  Skills:
  - delay 5
  - setstance{s=golemshard0} @self
  

### PUPA ###


quartzpupaLAND:
  Conditions:
  - onground true
  Skills:
  - state{s=idle;r=true} @self
  - state{s=land} @self

quartzpupaLIFESPAN:
  Skills:
  - delay 2
  - lunge{velocity=1;velocityY=0} @Forward{f=5}
  - state{s=idle} @self
  - delay 60
  - sound{s=littleroom_amethystgolem:littleroom.amethystgolem.shardout;v=.25;sc=HOSTILE;p=1} @self
  - effect:particles{particle=block_crack;m=quartz_block;amount=200;hS=.5;vS=.25} @self
  - summon{t=quartzshard} @self
  - remove @self

### SPIKES ###

quartzspikespawn1:
  Skills:
  - effect:spin{duration=5;velocity=20} @self
  - delay 10
  - effect:particles{particle=block_crack;m=stone;amount=100;hS=.5;vS=.15} @self
  - sound{s=littleroom_amethystgolem:littleroom.amethystgolem.shardout;v=.1;sc=HOSTILE;p=.12} @self
  - throw{v=5;vy=5} @PIR{r=3}
  - damage{amount=3} @PIR{r=3}
  - delay 60
  - effect:particles{particle=block_crack;m=quartz_block;amount=100;hS=.25;vS=.5} @self
  - explosion{yield=1} @self
  - remove @self
  
quartzspikespawn2:
  Skills:
  - effect:spin{duration=5;velocity=40} @self
  - delay 10
  - effect:particles{particle=block_crack;m=stone;amount=100;hS=.5;vS=.15} @self
  - sound{s=littleroom_amethystgolem:littleroom.amethystgolem.shardout;v=.1;sc=HOSTILE;p=.8} @self
  - throw{v=5;vy=5} @PIR{r=3}
  - damage{amount=3} @PIR{r=3}
  - delay 60
  - effect:particles{particle=block_crack;m=quartz_block;amount=100;hS=.25;vS=.5} @self
  - explosion{yield=1} @self
  - remove @self
  
  
quartzspikespawn3:
  Skills:
  - effect:spin{duration=5;velocity=80} @self
  - delay 10
  - effect:particles{particle=block_crack;m=stone;amount=100;hS=.5;vS=.15} @self
  - sound{s=littleroom_amethystgolem:littleroom.amethystgolem.shardout;v=.1;sc=HOSTILE} @self
  - throw{v=5;vy=5} @PIR{r=3}
  - damage{amount=3} @PIR{r=3}
  - delay 60
  - effect:particles{particle=block_crack;m=quartz_block;amount=100;hS=.25;vS=.5} @self
  - explosion{yield=1} @self
  - remove @self

### ARM SLAM ###

quartzGOLEMarmslam:
  Skills:
  - CancelEvent
  - skill{s=quartzGOLEMarmslamATTACK} @self
  
quartzGOLEMarmslamATTACK:
  Conditions:
  - offgcd true
  Skills:
  - sound{s=littleroom_amethystgolem:littleroom.amethystgolem.armslam;v=1;sc=HOSTILE} @self
  - gcd{ticks=20}
  - state{s=armslam;li=3;lo=2} @self
  - delay 30
  - sound{s=minecraft:entity.player.attack.nodamage;sc=HOSTILE} @self
  - effect:particles{particle=block_crack;m=quartz_block;amount=200;hS=1;vS=1} @ModelPart{m=quartzgolem;p=lefthand}
  - totem{ch=3;onStart=quartzGOLEMarmslamDAMAGE;int=1;hR=3;md=1;repeat=8;repeatInterval=1} @ModelPart{m=quartzgolem;p=lefthand}
  

quartzGOLEMarmslamDAMAGE:
  Skills:
  - throw{v=8;vy=4} @EIR{r=6}
  - damage{amount=8} @PIR{r=6}
  - effect:particles{particle=block_crack;m=quartz_block;amount=25;hS=.5;vS=.5} @ModelPart{m=quartzgolem;p=lefthand}
  
  
### FOOT POUND ###

quartzGOLEMfootpound:
  Conditions:
  - incombat true
  Skills:
  - CancelEvent
  - skill{s=quartzGOLEMfootpoundATTACK} @self
  
quartzGOLEMfootpoundATTACK:
  Conditions:
  - offgcd true
  Skills:
  - gcd{ticks=20}
  - setAI{ai=false} @self
  - state{s=footpound;li=3;lo=2} @self
  - delay 15
  - sound{s=littleroom_amethystgolem:littleroom.amethystgolem.stomp;v=1;sc=HOSTILE} @self
  - delay 15
  - sound{s=minecraft:entity.player.attack.nodamage;sc=HOSTILE} @self
  - totem{ch=3;onStart=quartzGOLEMfootpoundDAMAGE;int=1;hR=3;md=1} @ModelPart{m=quartzgolem;p=leftfoot}
  - setAI{ai=true} @self
  

quartzGOLEMfootpoundDAMAGE:
  Skills:
  - projectile{onTick=quartzGOLEMfootpoundSPIKES;v=12;i=4;hR=1;vR=1;syo=0;hs=true;hfs=-0;hp=false} @Target
  - throw{v=5;vy=10} @PIR{r=6}
  - damage{amount=5} @PIR{r=6}
  - effect:particles{particle=block_crack;m=quartz_block;amount=25;hS=.5;vS=.5} @ModelPart{m=quartzgolem;p=lefthand}
  
quartzGOLEMfootpoundSPIKES:
  Skills:
  - summon{t=quartzspikes} @origin
  
### SHARD TOSS ###

quartzGOLEMshardtoss1:
  Conditions:
  - incombat true
  - stance{s=NOSHARDS} false
  - stance{s=golemshard1} false
  - stance{s=golemshard2} false
  - stance{s=golemshard3} false
  - stance{s=golemshard4} false
  #- offgcd true
  Skills:
  - sound{s=littleroom_amethystgolem:littleroom.amethystgolem.shardgrab;v=1;sc=HOSTILE} @self
  - CancelEvent
  - gcd{ticks=60}
  - setAI{ai=false} @self
  - state{s=shardgrab;li=3;lo=2} @self
  - delay 30
  - ChangePart{model=quartzgolem;part=handshard;newmodel=quartzpupa;newpart=pupa} @self
  - effect:particles{particle=block_crack;m=stone;amount=25;hS=.5;vS=.5;repeat=5;repeatInterval=2} @ModelPart{m=quartzgolem;p=righthand}
  - effect:particles{particle=block_crack;m=quartz_block;amount=150;hS=.5;vS=.5} @ModelPart{m=quartzgolem;p=spike}
  - submodel{modelid=quartzgolem;partid=spike;subpartid=spike;remove=true} @self
  - delay 20
  - totem{ch=3;onStart=quartzGOLEMshardthrow;int=1;hR=3;md=1;repeat=5;repeatInterval=2} @ModelPart{m=quartzgolem;p=righthand}
  #- delay 1
  - ChangePart{model=quartzgolem;part=handshard;newmodel=quartzgolem;newpart=handshard} @self
  - summon{t=quartzpupa} @ModelPart{m=quartzgolem;p=righthand}
  - setAI{ai=true} @self
  - setstance{s=golemshard1} @self
  
quartzGOLEMshardtoss2:
  Conditions:
  - incombat true
  - stance{s=NOSHARDS} false
  - stance{s=golemshard0} false
  - stance{s=golemshard2} false
  - stance{s=golemshard3} false
  - stance{s=golemshard4} false
  #- offgcd true
  Skills:
  - sound{s=littleroom_amethystgolem:littleroom.amethystgolem.shardgrab;v=1;sc=HOSTILE} @self
  - CancelEvent
  - gcd{ticks=60}
  - setAI{ai=false} @self
  - state{s=shardgrab;li=3;lo=2} @self
  - delay 30
  - ChangePart{model=quartzgolem;part=handshard;newmodel=quartzpupa;newpart=pupa} @self
  - effect:particles{particle=block_crack;m=stone;amount=25;hS=.5;vS=.5;repeat=5;repeatInterval=2} @ModelPart{m=quartzgolem;p=righthand}
  - effect:particles{particle=block_crack;m=quartz_block;amount=150;hS=.5;vS=.5} @ModelPart{m=quartzgolem;p=spike2}
  - submodel{modelid=quartzgolem;partid=spike;subpartid=spike2;remove=true} @self
  - delay 20
  - totem{ch=3;onStart=quartzGOLEMshardthrow;int=1;hR=3;md=1;repeat=5;repeatInterval=2} @ModelPart{m=quartzgolem;p=righthand}
  #- delay 1
  - ChangePart{model=quartzgolem;part=handshard;newmodel=quartzgolem;newpart=handshard} @self
  - summon{t=quartzpupa} @ModelPart{m=quartzgolem;p=righthand}
  - setAI{ai=true} @self
  - setstance{s=golemshard2} @self
  
quartzGOLEMshardtoss3:
  Conditions:
  - incombat true
  - stance{s=NOSHARDS} false
  - stance{s=golemshard0} false
  - stance{s=golemshard1} false
  - stance{s=golemshard3} false
  - stance{s=golemshard4} false
  #- offgcd true
  Skills:
  - sound{s=littleroom_amethystgolem:littleroom.amethystgolem.shardgrab;v=1;sc=HOSTILE} @self
  - CancelEvent
  - gcd{ticks=60}
  - setAI{ai=false} @self
  - state{s=shardgrab;li=3;lo=2} @self
  - delay 30
  - ChangePart{model=quartzgolem;part=handshard;newmodel=quartzpupa;newpart=pupa} @self
  - effect:particles{particle=block_crack;m=stone;amount=25;hS=.5;vS=.5;repeat=5;repeatInterval=2} @ModelPart{m=quartzgolem;p=righthand}
  - effect:particles{particle=block_crack;m=quartz_block;amount=150;hS=.5;vS=.5} @ModelPart{m=quartzgolem;p=spike3}
  - submodel{modelid=quartzgolem;partid=spike;subpartid=spike3;remove=true} @self
  - delay 20
  - totem{ch=3;onStart=quartzGOLEMshardthrow;int=1;hR=3;md=1;repeat=5;repeatInterval=2} @ModelPart{m=quartzgolem;p=righthand}
  #- delay 1
  - ChangePart{model=quartzgolem;part=handshard;newmodel=quartzgolem;newpart=handshard} @self
  - summon{t=quartzpupa} @ModelPart{m=quartzgolem;p=righthand}
  - setAI{ai=true} @self
  - setstance{s=golemshard3} @self
  
quartzGOLEMshardtoss4:
  Conditions:
  - incombat true
  - stance{s=NOSHARDS} false
  - stance{s=golemshard0} false
  - stance{s=golemshard1} false
  - stance{s=golemshard2} false
  - stance{s=golemshard4} false
  #- offgcd true
  Skills:
  - sound{s=littleroom_amethystgolem:littleroom.amethystgolem.shardgrab;v=1;sc=HOSTILE} @self
  - CancelEvent
  - gcd{ticks=60}
  - setAI{ai=false} @self
  - state{s=shardgrab;li=3;lo=2} @self
  - delay 30
  - ChangePart{model=quartzgolem;part=handshard;newmodel=quartzpupa;newpart=pupa} @self
  - effect:particles{particle=block_crack;m=stone;amount=25;hS=.5;vS=.5;repeat=5;repeatInterval=2} @ModelPart{m=quartzgolem;p=righthand}
  - effect:particles{particle=block_crack;m=quartz_block;amount=150;hS=.5;vS=.5} @ModelPart{m=quartzgolem;p=spike4}
  - submodel{modelid=quartzgolem;partid=spike;subpartid=spike4;remove=true} @self
  - delay 20
  - totem{ch=3;onStart=quartzGOLEMshardthrow;int=1;hR=3;md=1;repeat=5;repeatInterval=2} @ModelPart{m=quartzgolem;p=righthand}
  #- delay 1
  - ChangePart{model=quartzgolem;part=handshard;newmodel=quartzgolem;newpart=handshard} @self
  - summon{t=quartzpupa} @ModelPart{m=quartzgolem;p=righthand}
  - setAI{ai=true} @self
  - setstance{s=golemshard4} @self
  
quartzGOLEMshardtoss5:
  Conditions:
  - incombat true
  - stance{s=NOSHARDS} false
  - stance{s=golemshard0} false
  - stance{s=golemshard1} false
  - stance{s=golemshard2} false
  - stance{s=golemshard3} false
  - offgcd true
  Skills:
  - sound{s=littleroom_amethystgolem:littleroom.amethystgolem.shardgrab;v=1;sc=HOSTILE} @self
  - CancelEvent
  - gcd{ticks=60}
  - setAI{ai=false} @self
  - state{s=shardgrab;li=3;lo=2} @self
  - delay 30
  - ChangePart{model=quartzgolem;part=handshard;newmodel=quartzpupa;newpart=pupa} @self
  - effect:particles{particle=block_crack;m=stone;amount=25;hS=.5;vS=.5;repeat=5;repeatInterval=2} @ModelPart{m=quartzgolem;p=righthand}
  - effect:particles{particle=block_crack;m=quartz_block;amount=150;hS=.5;vS=.5} @ModelPart{m=quartzgolem;p=spike5}
  - submodel{modelid=quartzgolem;partid=spike;subpartid=spike5;remove=true} @self
  - delay 20
  - totem{ch=3;onStart=quartzGOLEMshardthrow;int=1;hR=3;md=1;repeat=5;repeatInterval=2} @ModelPart{m=quartzgolem;p=righthand}
  #- delay 1
  - ChangePart{model=quartzgolem;part=handshard;newmodel=quartzgolem;newpart=handshard} @self
  - summon{t=quartzpupa} @ModelPart{m=quartzgolem;p=righthand}
  - setAI{ai=true} @self
  - setstance{s=NOSHARDS} @self
  
  
quartzGOLEMshardthrow:
  Skills:
  - throw{v=10;vy=0} @EIR{r=3;types=quartzpupa}
  
### DEATH ###

quartzGOLEMdeath:
  Skills:
  - sound{s=littleroom_amethystgolem:littleroom.amethystgolem.death;v=1;sc=HOSTILE} @self
  - effect:particles{p=reddust;color=#24f070;amount=15;hs=.25;vs=.25;repeat=15;repeatInterval=2} @ModelPart{m=quartzgolem;p=head}
  - effect:particles{particle=block_crack;m=stone;amount=150;hs=.5;vs=.5} @ModelPart{m=quartzgolem;p=jawright}
  - submodel{modelid=quartzgolem;partid=anything;subpartid=jawright;remove=true} @self
  - delay 15
  - effect:particles{particle=block_crack;m=quartz_block;amount=150;hs=.5;vs=.5} @ModelPart{m=quartzgolem;p=lefthand}
  - submodel{modelid=quartzgolem;partid=anything;subpartid=lefthand;remove=true} @self
  - delay 15
  - effect:particles{particle=block_crack;m=stone;amount=150;hs=.5;vs=.5} @ModelPart{m=quartzgolem;p=righthand}
  - submodel{modelid=quartzgolem;partid=anything;subpartid=righthand;remove=true} @self
  - delay 2
  - effect:particles{particle=block_crack;m=stone;amount=150;hs=.5;vs=.5} @ModelPart{m=quartzgolem;p=rightelbow}
  - submodel{modelid=quartzgolem;partid=anything;subpartid=rightelbow;remove=true} @self
  - effect:particles{particle=block_crack;m=quartz_block;amount=150;hs=.5;vs=.5} @ModelPart{m=quartzgolem;p=leftelbow}
  - submodel{modelid=quartzgolem;partid=anything;subpartid=leftelbow;remove=true} @self
  - delay 2
  - effect:particles{particle=block_crack;m=stone;amount=150;hs=.5;vs=.5} @ModelPart{m=quartzgolem;p=rightfoot}
  - submodel{modelid=quartzgolem;partid=anything;subpartid=rightfoot;remove=true} @self
  - effect:particles{particle=block_crack;m=stone;amount=150;hs=.5;vs=.5} @ModelPart{m=quartzgolem;p=head}
  - submodel{modelid=quartzgolem;partid=anything;subpartid=head;remove=true} @self
  - throw{v=10;vy=2} @PIR{r=6}
  - delay 2
  - effect:particles{particle=block_crack;m=stone;amount=150;hs=.5;vs=.5} @ModelPart{m=quartzgolem;p=leftfoot}
  - submodel{modelid=quartzgolem;partid=anything;subpartid=leftfoot;remove=true} @self
  - effect:particles{p=campfire_cosy_smoke;amount=150;hs=2;vs=.25} @self
  - delay 8
  - effect:particles{particle=large_smoke;amount=500;hs=1;vs=.5} @ModelPart{m=quartzgolem;p=quartzgolem}
  - remove @self
  
#### SHARDS ####

quartzshardATTACK:
  Skills:
  - CancelEvent
  - skill{s=quartzshardATTACKskill} @self
  
quartzshardATTACKskill:
  Cooldown: 2
  Skills:
  - state{s=attack} @self
  - delay 20
  - sound{s=minecraft:entity.player.attack.nodamage;sc=HOSTILE} @self
  - totem{ch=3;onStart=quartzshardATTACKDAMAGE;int=1;hR=3;md=1} @Forward{f=1.0}
  

quartzshardATTACKDAMAGE:
  Skills:
  - damage{amount=1} @PIR{r=2}
  
  
quartzshardDEATH:
  Skills:
  - delay 15
  - effect:particles{particle=block_crack;m=quartz_block;amount=25} @ModelPart{m=shard;p=head}
  - submodel{modelid=shard;partid=anything;subpartid=head;remove=true} @self
