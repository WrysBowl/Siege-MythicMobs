######    RIFT    #######

  

######    WIZPIG    #######

wizpiglinfidget:
  Conditions:
  - incombat{} false
  Skills:
  - state{s=fidget} @self

riftjumptoplayer:
  Conditions:
  - targetnotwithin{d=24} true
  Skills:
  - summon{type=portalrift2;amount=1} @self
  - teleport{spreadh=6;spreadv=2} @target
  - summon{type=portalrift2;amount=1} @self
  
riftjump:
  Conditions:
  - playerwithin{d=8} true
  Skills:
  - summon{type=portalrift2;amount=1} @self
  - teleport{spreadh=12;spreadv=2} @self
  - summon{type=portalrift2;amount=1} @self
  - delay 10
  - skill{s=riftjumpchain} @self .5
  - delay 10
  - skill{s=riftjumpchain} @self .2
  - delay 10
  - skill{s=riftjumpchain} @self .1
  
  
riftjumpchain:
  Skills:
  - teleport{spreadh=12;spreadv=2} @self
  - summon{type=portalrift2;amount=1} @self
  
wizpigkick:
  Conditions:
  - offgcd{} true
  Skills:
  - CancelEvent
  - skill{s=wizpigMelee} @self

wizpigMelee:
  Cooldown: 6.0
  Skills:
  - gcd{ticks=60}
  - setAI{ai=false} @self
  - state{s=kick;li=3;lo=2} @self
  - delay 10
  - sound{s=entity.ender_dragon.flap;v=.5} @self
  - delay 10
  - totem{ch=1;onStart=wizpigMeleeDamage;int=1;hR=3;md=1} @Forward{f=1}
  - delay 15
  - setAI{ai=true} @self

wizpigMeleeDamage:
  Skills:
  - throw{velocity=12;velocityY=2} @PlayersInRadius{r=3}
  - damage{amount='50'} @EntitiesNearOrigin{r=3}

  

PlayerShot:
  Conditions:
  - offgcd{} true
  - incombat{} true
  #- targetwithin{d=2} false
  #- playerwithin{d=24} true
  #- lineofsight{} true
  Skills:
  - CancelEvent
  - gcd{ticks=60}
  - effect:particles{particle=portal;amount=75;s=4} @Forward{f=1;y=2.0}
  - delay 15
  - setAI{ai=false} @self
  - state{mid=wizpiglin;s=riftplayer} @self
  - sound{s=entity.evoker_fangs.attack;p=.1;v=3} @self
  - delay 30
  - setAI{ai=true} @self
  - projectile{bulletType=MOB;mob=pigshot;bulletSpin=1;onTick=NetherShot-Tick;onHit=NetherShot-Hit2;v=10;i=1;hR=1;vR=1;sE=true;hnp=false;syo=2;oE=NetherShot-Hit2}
  - lunge{velocity=2;velocityY=0} @Forward{f=-2;y=0.0}
  - sound{s=entity.shulker.shoot;p=.1;v=3} @self
  - effect:particles{particle=campfire_cosy_smoke;amount=1} @self
  - delay 2
  - effect:particles{particle=campfire_cosy_smoke;amount=1} @self
  - delay 2
  - effect:particles{particle=campfire_cosy_smoke;amount=1} @self
  - delay 2
  - effect:particles{particle=campfire_cosy_smoke;amount=1} @self
  
NetherShot:
  Cooldown:
  Conditions:
  - offgcd{} true
  - incombat{} true
  Skills:
  - gcd{ticks=60}
  - effect:particles{particle=portal;amount=50;s=4} @Forward{f=0;y=2.0}
  - delay 15
  - look{headOnly=false;immediately=true} @MIR{r=12;t=portalrift;limit=1;sort=NEAREST}
  - delay 10
  - look{headOnly=false;immediately=true} @MIR{r=12;t=portalrift;limit=1;sort=NEAREST}
  - setAI{ai=false} @self 
  - state{mid=wizpiglin;s=riftself} @self
  - sound{s=entity.evoker_fangs.attack;p=.1;v=3} @self
  - delay 30
  - setAI{ai=true} @self
  - sound{s=entity.shulker.shoot;p=.1;v=3} @self
  - projectile{bulletType=MOB;mob=pigshot;bulletSpin=1;onTick=NetherShot-Tick;onHit=NetherShot-Hit;v=15;i=1;hR=.5;vR=.5;=true;syo=2;sE=true;hnp=true;sfo=2}
  
NetherShot-Tick:
  Skills:
  - effect:particles{p=falling_obsidian_tear;amount=2;speed=0;hS=0.2;vS=0.2} @origin
  
NetherShot-Hit:
  Skills:
  - damage{a=80}
  - signal{s=TELE1} @EntitiesNearOrigin{r=3}
  
  
NetherShot-Tele1:
  Skills:
  - signal{s=TELE2} @EntitiesNearOrigin{r=24}
  
NetherShot-Tele2:
  Skills:
  - sound{s=entity.ender_dragon.hurt;p=.1;v=3} @self
  - projectile{bulletType=MOB;mob=pigshot;bulletSpin=1;onTick=NetherShot-Tick;onHit=NetherShot-Hit2;v=15;i=1;hR=1;vR=1;syo=0;sfo=0;hnp=false;oE=NetherShot-Hit2}
  
NetherShot-Hit2:
  Skills:
  - sound{s=entity.shulker_bullet.hit;p=.2;v=3} @self
  - damage{a=80}
  - effect:particles{p=largeexplode;amount=2;speed=1;hS=0.2;vS=0.2} @origin
  
riftshootme:
  Conditions:
  - playerwithin{d=24} true
  Skills:
  - signal{s=shootme} @EntitiesNearOrigin{r=16}
  
rift:
  Conditions:
  - offgcd{} true
  - incombat{} true
  Skills:
  - gcd{ticks=120}
  - effect:particles{particle=portal;amount=50;s=4} @Forward{f=0;y=2.0}
  - delay 15
  - setAI{ai=false} @self ~onSpawn
  - state{mid=wizpiglin;s=riftself;li=3;lo=3} @self
  - sound{s=entity.evoker.prepare_summon;p=.2;v=3} @self	
  - delay 35
  - summon{type=portalspawndummy;amount=1} @Forward{f=2;y=0.0}
  - summon{type=portalspawndummy;amount=1} @PlayersInRadius{r=24;limit=4;sort=FURTHEST}
  - setAI{ai=true} @self ~onSpawn

riftdespawn:
  Skills:
  - look{headOnly=false;immediately=true} @RLNTE{a=1;r=8;s=4;minr=2;}
  - delay 320
  - effect:particles{p=flash;amount=2;speed=1;hS=0.2;vS=0.2} @self
  - remove @self
  
riftdespawn2:
  Skills:
  - look{headOnly=false;immediately=true} @RLNTE{a=1;r=8;s=4;minr=2;}
  - delay 20
  - effect:particles{p=flash;amount=2;speed=1;hS=0.2;vS=0.2} @self
  - remove @self
  
ghastexplode:
  Skills:
  - effect:particles{p=falling_obsidian_tear;amount=200;speed=1;hS=0.3;vS=0.3} @Origin{yoffset=1}
  - effect:particles{p=dragon_breath;amount=50;hS=0.3;vS=0.3} @Origin{yoffset=1}
  - remove @self
  
ghastattack:
  Skills:
  - effect:particles{p=falling_obsidian_tear;amount=200;speed=1;hS=0.3;vS=0.3} @Origin{yoffset=1}
  - effect:particles{p=dragon_breath;amount=50;hS=0.3;vS=0.3} @Origin{yoffset=1}
  - potion{type=BLINDNESS;duration=30;level=4} @PlayersInRadius{r=3}
  - remove @self